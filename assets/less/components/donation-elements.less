// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at http://mozilla.org/MPL/2.0/.

.modal {
    top: 50%;
    transform: translateY(-50%);
    z-index: 1;

    #close-modal {
        cursor: pointer;

        svg {
            stroke: @colors[grey];
        }
        &:hover svg {
            stroke: @colors[black];
        }
    }

    form {
        .amount-selection {
            label {
                &:extend(.h-10, .pt-1, .pl-3, .pb-1, .pr-3, .rounded, .border, .border-solid, .border-grey, .bg-white, .font-xl, .font-bold);
                cursor: pointer;
                box-sizing: border-box;
                &:hover {
                    &:extend(.border-blue);
                }
                &:last-child {
                    &:extend(.pt-0, .pb-0, .pr-0, .bg-grey-lighter, .overflow-hidden);
                    flex-basis: @widths[w-40];
                    #amount-other {
                        &:extend(.w-full, .h-full, .pl-2, .border-0, .border-l, .border-solid, .border-grey, .font-xl);
                        box-sizing: border-box;
                        &::placeholder {
                            &:extend(.font-md);
                        }
                    }

                }
                &.active {
                    &:extend(.border-blue, .bg-blue-25, .shadow-none);
                }
            }
        }
    }

    footer {
        ul > li:not(:last-child)::after {
            content: 'â€¢';
            &:extend(.ml-3, .text-grey, .font-regular, .leading-none);
        }
    }
}

// Helper function / constant for our blue
.colour-blue(@alpha) {
    background-color: rgba(0, 128, 255, @alpha);
}

#donate-buttons {
    max-height: 60px;
}

#amount-cancel {
    p {
        &:extend(.leading-loose, .my-auto);
    }
}

.btn-donate-and-download {
    &:extend(.flex,
    .bg-white,
    .text-green,
    .font-xl,
    .font-semibold,
    .no-underline,
    .pt-4,
    .pb-4,
    .pl-5,
    .pr-6,
    .mr-4,
    .border-green-light,
    .rounded-sm,
    .border,
    .border-solid);

    // Make sure our donate-wave div doesn't render outside of the button
    contain: paint;
    /*
     * Smooths out Firefox SVG animations by rendering the Vector image in 3D (iirc this turns it into a bitmap image.)
     * Without this *hack* the animation will shimmer and clip terribly.
     */
    transform: rotateZ(0.1deg);

    // Remove the animation if they prefer reduced motion
    @media (prefers-reduced-motion) {
        .donate-wave {
            animation: none !important;
        }

        .donate-heart {
            svg {
                animation: none !important;
            }
        }
    }

    .donate-wave {
        display: inline-block;
        position: relative;
        margin: auto;
        // Hand crafted values from the heart. If you adjust sizing, make sure to tweak these!
        left: calc(-256px + 8px);
        top: calc(-256px - 12px);
        width: 512px;
        height: 512px;
        border-radius: 50%;

        // donate-wave should be twice the length of donate-heart animation,
        // since donate-heart bounces back and forth.
        animation: linear 2s heart-wave infinite;
    }

    .donate-heart {
        &:extend(.mr-2, .w-4, .h-5, .text-blue, .my-auto);
        float: left;
        svg {
            animation: linear 1s alternate heart-bounce infinite;
        }
    }

    p {
        &:extend(.my-auto);
    }

    &:hover,
    &:focus {
        &:extend(.shadow-md);
        .transform(translateY(-7%));
        .colour-blue(0.1);
    }
}

@keyframes heart-bounce {
    from {
        transform: scale(1.0);
    }
    to {
        transform: scale(1.3);
    }
}

@keyframes heart-wave {
    from {
        transform: scale(0.0);
    }
    25% {
        transform: scale(0.0);
        .colour-blue(0.35);
    }
    35% {
        .colour-blue(0.15);
    }
    to {
        transform: scale(2.0);
        .colour-blue(0.0);
    }
}